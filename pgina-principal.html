<!DOCTYPE html>
<html lang="english">
  <head>
    <title>exported project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 12px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-gray-black);
        background-color: var(--dl-color-gray-white);

      }
      /* Estilos para los elementos de proyecto */


    </style>
    <link
      rel="stylesheet"
      href="https://unpkg.com/animate.css@4.1.1/animate.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Andada+Pro:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
    />
    
  </head>
  <body>
    <link rel="stylesheet" href="./style.css" />
    <div>
      <link href="./pgina-principal.css" rel="stylesheet" />
      <style>
      .perfil-text34a {
  display: block;
  padding: 10px;
  margin-bottom: 5px;
  border-radius: 5px;
  color: #333;
  text-decoration: none;
  transition: background-color 0.3s ease;
  width: 100%; /* Asegura que cada elemento de proyecto ocupe todo el ancho disponible */
  box-sizing: border-box; /* Incluye el relleno y el borde en el ancho total */
}
.pgina-principal-text15{
  margin-top: 275px;
}
/* Estilos para el menú de proyectos */
#proyectos-menua {
  margin-top: 20px;
  display: flex; /* Usa flexbox */
  flex-direction: column; /* Establece la dirección como columna */
}

/* Estilos para los elementos de proyecto */
#proyectos-menua a {
  display: block;
  padding: 10px;
  margin-bottom: 5px;
  border-radius: 5px;
  color: #333;
  text-decoration: none;
  transition: background-color 0.3s ease;
}

#proyectos-menua a:hover {
  background-color: #ddd;
}
      </style>

      <div class="pgina-principal-container">
        <div class="pgina-principal-pgina-principal">
          <div class="pgina-principal-container1">
            <div class="pgina-principal-recientes">
              <div class="pgina-principal-frame11">
                <span class="pgina-principal-text"><span>RECIENTES</span></span>
              </div>
            </div>
            <img
              alt="Rectangle191085"
              src="public/external/rectangle191085-1ol-400h.png"
              class="pgina-principal-rectangle19"
            />
            
            <img
              alt="Rectangle201085"
              src="public/external/rectangle201085-rai-400h.png"
              class="pgina-principal-rectangle20"
            />
            
            <div class="pgina-principal-recientes1">
              <div class="pgina-principal-frame111">
                <span class="pgina-principal-text06">PENDIENTES</span>
              </div>
            </div>
          </div>
          <div class="pgina-principal-group19">
            <img
              alt="imageremovebgpreview11084"
              src="public/external/imageremovebgpreview11084-f4wu-300h.png"
              class="pgina-principal-imageremovebgpreview1"
            />
            <div class="pgina-principal-group191">
              <img
                alt="image11084"
                src="public/external/image11084-ur4s-200h.png"
                class="pgina-principal-image1"
              />
            </div>
          </div>
          <div class="pgina-principal-group11">
            <img
              alt="Rectangle131117"
              src="public/external/rectangle131117-559-1000h.png"
              class="pgina-principal-rectangle13"
            />
            <div class="pgina-principal-menu-general">
              <span class="pgina-principal-text07">
                <span>Pagina Principal</span>
              </span>
              <span class="pgina-principal-text09">
                <span id="nombre">Alex Naranjo</span>
              </span>
              <a href="notificaciones.html" class="pgina-principal-text11">
                <span>Notificaciones</span>
              </a>
              <a href="crear-proyecto.html" class="pgina-principal-text13">
                <span>Crear nuevo proyecto</span>
              </a>
              <span class="pgina-principal-text15" id="text15"><span>Proyectos</span></span>
              
            </div>
            <div class="pgina-principal-proyectos-menu" id="proyectos-menua">
              
            </div>
            <img
              alt="Line11117"
              src="public/external/line11117-vty.svg"
              class="pgina-principal-line1"
            />
          </div>
          <div class="pgina-principal-group16">
            <img
              alt="IMAGEaf14bdecfaef4ce4ac43de648aba53e3removebgprevi1116"
              src="public/external/imageaf14bdecfaef4ce4ac43de648aba53e3removebgprevi1116-fpva-200h.png"
              class="pgina-principal-imag-eaf14bdecfaef4ce4ac43de648aba53e3removebgprevi"
            />
            <span class="pgina-principal-text23">
              <span>TENDINDO TASKING</span>
            </span>
            <div class="pgina-principal-container2">
              <a href="perfil.html" class="pgina-principal-navlink">
                <div class="pgina-principal-group26">
                  <img
                    alt="Vector1116"
                    src="public/external/vector1116-acs.svg"
                    class="pgina-principal-vector"
                  />
                  <img
                    alt="image51116"
                    src="public/external/image51116-k50g-200w.png"
                    class="pgina-principal-image5"
                  />
                </div>
              </a>
              <a href="inicio-sesin.html" class="pgina-principal-navlink1">
                <div class="pgina-principal-group27">
                  <img
                    alt="Vector1116"
                    src="public/external/vector1116-eqxl.svg"
                    class="pgina-principal-vector1"
                  />
                  <img
                    alt="image31116"
                    src="public/external/image31116-v493-200w.png"
                    class="pgina-principal-image3"
                  />
                </div>
              </a>
              <div class="pgina-principal-container3">
                <img
                  alt="Vector1116"
                  src="public/external/vector1116-6ow9.svg"
                  class="pgina-principal-vector2"
                />
                <img
                  alt="Vector1116"
                  src="public/external/vector1116-ptij.svg"
                  class="pgina-principal-vector3"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>

      if(!sessionStorage.getItem('usuario')){
}
const user = JSON.parse(sessionStorage.getItem('usuario'));
    console.log(user);
    
    const usuario = JSON.parse(sessionStorage.getItem('usuario'));
    console.log(usuario);
    localStorage.setItem('usuario', usuario);
    document.getElementById('nombre').innerText = usuario.nombre;
    document.addEventListener("DOMContentLoaded", async function() {
    const proyectosMenu = document.getElementById("proyectos-menua");

    const projects = await getProjects(user.cedula);
    sessionStorage.setItem('projects', JSON.stringify(projects));
    // Verifica si projects es un array antes de intentar iterar sobre él
    
});
async function getProjects(cedula) {
    try {
        const response = await fetch("https://requeapi-1.onrender.com/getProjects", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            // Convertir el objeto a cadena JSON usando JSON.stringify()
            body: JSON.stringify({ "cedula": cedula }),
        });

        const data = await response.json();
        return data;
    } catch (error) {
        console.error("Error:", error);
        throw error; // Propagar el error para manejarlo en el nivel superior
    }
}
async function actualizarProyectos() {
    try {
        const user = JSON.parse(sessionStorage.getItem('usuario'));
        const projects = await getProjects(user.cedula);
        const proyectosMenu = document.getElementById("proyectos-menua");
        
        // Verifica si projects es un array antes de intentar iterar sobre él
        if (Array.isArray(projects)) {
            proyectosMenu.innerHTML = ""; // Limpiar solo los proyectos anteriores
            
            // Agregar los proyectos dentro de #proyectos-menua
            projects.forEach(project => {
                const proyectoElement = document.createElement('a');
                proyectoElement.href = `consulta-proyecto.html?id=${project.idProyecto}`;
                proyectoElement.classList.add('perfil-text34a');
                proyectoElement.innerHTML = `<span>${project.nombre_proyecto}</span>`;
                proyectosMenu.appendChild(proyectoElement);
            });
        } else {
            console.error("Error: No se pudieron obtener los proyectos");
        }
    } catch (error) {
        console.error("Error al actualizar proyectos:", error);
    }
}


// Llama a actualizarProyectos inicialmente para cargar los proyectos cuando la página se carga
document.addEventListener("DOMContentLoaded", actualizarProyectos);

// Actualiza automáticamente los proyectos cada 5 minutos (300,000 milisegundos)
setInterval(actualizarProyectos, 10000); // 300000 ms = 5 minutos
    </script>
  </body>
</html>
